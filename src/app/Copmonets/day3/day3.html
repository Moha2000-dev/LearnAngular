<section class="min-h-screen bg-gray-100 p-6 md:p-10">
  <div class="max-w-5xl mx-auto bg-white rounded-2xl shadow-lg p-6 md:p-8 space-y-8">
    <h2 class="text-2xl md:text-3xl font-bold text-gray-900">
      Day 3 - ngClass, ngStyle, ngIf &amp; Dynamic Dashboard
    </h2>

    <div class="bg-gray-50 border border-gray-200 rounded-xl p-4 space-y-4">
      <h3 class="font-semibold text-pink-600">
        Example 1: Active Admin &amp; Users Styling (ngClass + ngStyle + ngIf)
      </h3>

      <div class="flex flex-wrap gap-2 text-xs items-center">
        <span class="text-gray-700 font-semibold mr-1">Filter:</span>

        <button
          class="px-3 py-1 rounded-full border"
          [ngClass]="{
            'bg-pink-600 text-white border-pink-600': selectedRoleFilter === 'All',
            'bg-white text-gray-700 border-gray-300': selectedRoleFilter !== 'All'
          }"
          (click)="setFilter('All')"
        >
          All
        </button>

        <button
          class="px-3 py-1 rounded-full border"
          [ngClass]="{
            'bg-purple-600 text-white border-purple-600': selectedRoleFilter === Role.Admin,
            'bg-white text-gray-700 border-gray-300': selectedRoleFilter !== Role.Admin
          }"
          (click)="setFilter(Role.Admin)"
        >
          Admin
        </button>

        <button
          class="px-3 py-1 rounded-full border"
          [ngClass]="{
            'bg-indigo-600 text-white border-indigo-600': selectedRoleFilter === Role.User,
            'bg-white text-gray-700 border-gray-300': selectedRoleFilter !== Role.User
          }"
          (click)="setFilter(Role.User)"
        >
          Users
        </button>

        <button
          class="px-3 py-1 rounded-full border"
          [ngClass]="{
            'bg-gray-700 text-white border-gray-700': selectedRoleFilter === Role.Guest,
            'bg-white text-gray-700 border-gray-300': selectedRoleFilter !== Role.Guest
          }"
          (click)="setFilter(Role.Guest)"
        >
          Guests
        </button>
      </div>

      <div *ngIf="filteredUsers.length > 0; else noUsers">
        <ul class="space-y-2 text-sm">
          <li
            *ngFor="let u of filteredUsers"
            class="flex items-center justify-between px-3 py-2 rounded-lg border"
            [ngClass]="{
              'border-purple-500 bg-purple-50': u.role === Role.Admin && u.active,
              'border-purple-300 bg-purple-100/60': u.role === Role.Admin && !u.active,
              'border-indigo-300 bg-indigo-50': u.role === Role.User,
              'border-gray-300 bg-gray-50': u.role === Role.Guest
            }"
            [ngStyle]="{
              opacity: u.active ? 1 : 0.6,
              'box-shadow':
                u.role === Role.Admin && u.active ? '0 0 0 2px rgba(168, 85, 247, 0.4)' : 'none'
            }"
          >
            <div>
              <div class="font-semibold text-gray-900">
                {{ u.name }}
                <span
                  *ngIf="u.role === Role.Admin && u.active"
                  class="ml-2 text-xs px-2 py-0.5 rounded-full bg-purple-600 text-white"
                >
                  Active Admin
                </span>
              </div>

              <div class="text-xs text-gray-600">
                Role:
                <span
                  [ngClass]="{
                    'text-purple-600 font-semibold': u.role === Role.Admin,
                    'text-indigo-600 font-semibold': u.role === Role.User,
                    'text-gray-600': u.role === Role.Guest
                  }"
                >
                  {{ u.role }}
                </span>
                Â·
                <span [ngClass]="{ 'text-emerald-600': u.active, 'text-red-500': !u.active }">
                  {{ u.active ? 'Active' : 'Inactive' }}
                </span>
              </div>
            </div>

            <button
              class="text-xs px-3 py-1 rounded-full border bg-white hover:bg-gray-100"
              (click)="toggleActive(u)"
            >
              Toggle Active
            </button>
          </li>
        </ul>
      </div>

      <ng-template #noUsers>
        <p class="text-sm text-gray-500 italic">No users for this filter. Try another role.</p>
      </ng-template>
    </div>

    <div class="bg-gray-50 border border-gray-200 rounded-xl p-4 space-y-4">
      <h3 class="font-semibold text-pink-600">Example 2: Dynamic Task Dashboard</h3>

      <div *ngIf="tasks.length > 0; else noTasks" class="space-y-3">
        <div
          *ngFor="let task of tasks"
          class="p-4 rounded-lg shadow-md border flex flex-col gap-2 bg-white"
          [ngClass]="{
            'line-through text-gray-400 bg-gray-100': task.completed
          }"
          [ngStyle]="{
            'border-color': task.overdue ? '#ef4444' : '#e5e7eb',
            'box-shadow': task.overdue
              ? '0 0 0 1px rgba(239, 68, 68, 0.4)'
              : '0 1px 3px rgba(15, 23, 42, 0.1)'
          }"
        >
          <div class="flex items-start justify-between gap-2">
            <div>
              <h4
                class="font-semibold text-gray-900"
                [ngClass]="{ 'text-gray-500': task.completed }"
              >
                {{ task.name }}
              </h4>
              <p class="text-xs text-gray-500">
                Due:
                <span class="font-medium">
                  {{ task.dueDate | date : 'mediumDate' }}
                </span>
              </p>
            </div>

            <div class="flex flex-col items-end gap-1">
              <span
                class="text-xs px-2 py-0.5 rounded-full"
                [ngClass]="{
                  'bg-red-100 text-red-700': task.priority === 'High',
                  'bg-amber-100 text-amber-700': task.priority === 'Medium',
                  'bg-emerald-100 text-emerald-700': task.priority === 'Low'
                }"
              >
                {{ task.priority }} priority
              </span>

              <button
                class="text-xs px-2 py-0.5 rounded-full border bg-white hover:bg-gray-100"
                (click)="toggleCompleted(task)"
              >
                {{ task.completed ? 'Mark as Pending' : 'Mark as Done' }}
              </button>
            </div>
          </div>

          <p class="text-sm text-gray-700" [ngClass]="{ 'text-gray-500': task.completed }">
            {{ task.description }}
          </p>

          <div class="flex items-center justify-between text-xs">
            <span class="text-gray-600">
              Cost:
              <span class="font-semibold text-gray-900">
                {{ task.cost | currency : 'OMR' : 'symbol' : '1.2-2' }}
              </span>
            </span>

            <span
              *ngIf="task.overdue && !task.completed"
              class="text-xs px-2 py-0.5 rounded-full bg-red-100 text-red-700 font-semibold"
            >
              Overdue!
            </span>
            <span
              *ngIf="!task.overdue && !task.completed"
              class="text-xs px-2 py-0.5 rounded-full bg-blue-100 text-blue-700"
            >
              In progress
            </span>
            <span
              *ngIf="task.completed"
              class="text-xs px-2 py-0.5 rounded-full bg-emerald-100 text-emerald-700"
            >
              Completed
            </span>
          </div>
        </div>
      </div>

      <ng-template #noTasks>
        <p class="text-sm text-gray-500 italic">No tasks found. Add a new task to get started.</p>
      </ng-template>
    </div>
  </div>
</section>
